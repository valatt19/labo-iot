{% extends "index.html" %}
{% block content %}

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/window.css')}}" />
    <link rel="stylesheet" href="{{url_for('static', filename='css/dashboard.css')}}" />

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://demos.creative-tim.com/soft-ui-dashboard/assets/css/nucleo-icons.css">
    <link rel="stylesheet" href="https://demos.creative-tim.com/soft-ui-dashboard/assets/css/nucleo-svg.css">
    <link rel="stylesheet" href="https://demos.creative-tim.com/soft-ui-dashboard/assets/css/soft-ui-dashboard.min.css?v=1.0.2">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
    <link rel="stylesheet" href="./assets/css/loopple/loopple.css">
</head>

<body class="g-sidenav-show">


<div class="main">
    <div class="part">
        <h1>Consommation énergétique</h1>
        <div class="main-content" id="panel">
            <div class="container-fluid pt-3">
                <div class="row removable">
                    <div class="col-xl-3 col-sm-6">
                    </div>
                    <div class="col-xl-3 col-sm-6">
                    </div>
                    <div class="col-xl-3 col-sm-6">
                    </div>
                    <div class="col-xl-3 col-sm-6">
                    </div>
                </div>
                <div class="row removable">
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text font-weight-bold">Appareils connectés<br></p>
                                            <h5 class="font-weight-bolder mb-0">{{energy["nb_app"]}}<br></h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape shadow text-center border-radius-md bg-dark">
                                            <i class="ni ni-tv-2 text-lg opacity-10" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text font-weight-bold">Puissance totale en temps réel<br></p>
                                            <h5 id="kw_actual" class="font-weight-bolder mb-0">{{energy["kw_actual"]}} kW</h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape shadow text-center border-radius-md bg-dark">
                                            <i class="ni ni-bulb-61 text-lg opacity-10" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row removable">
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text font-weight-bold" contenteditable="true">Consommation<br>aujourd'hui<br></p>
                                            <h5 id="kw_today" class="font-weight-bolder mb-0">{{energy["kw_today"]}}kWh
                                                {% if energy["pc_today"] < 0 %}
                                                    <span class="text-success text-sm font-weight-bolder">{{energy["pc_today"]}}%</span>
                                                {% else %}
                                                    <span class="text-danger text-sm font-weight-bolder">+{{energy["pc_today"]}}%</span>
                                                {% endif %}
                                            </h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape shadow text-center border-radius-md bg-dark">
                                            <i class="ni ni-chart-bar-32 text-lg opacity-10 text-default" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text font-weight-bold">Consommation<br>cette semaine</p>
                                            <h5 class="font-weight-bolder mb-0">{{energy["kwh_today"]}} kWh
                                                {% if energy["pc_week"] < 0 %}
                                                    <span class="text-success text-sm font-weight-bolder">{{energy["pc_week"]}}%</span>
                                                {% else %}
                                                    <span class="text-danger text-sm font-weight-bolder">+{{energy["pc_week"]}}%</span>
                                                {% endif %}                                            </h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape shadow text-center border-radius-md bg-dark">
                                            <i class="ni ni-chart-bar-32 text-lg opacity-10" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text font-weight-bold">Consommation<br>ce mois</p>
                                            <h5 class="font-weight-bolder mb-0">{{energy["kwh_month"]}} kWh 
                                                {% if energy["pc_month"] < 0 %}
                                                    <span class="text-success text-sm font-weight-bolder">{{energy["pc_month"]}}%</span>
                                                {% else %}
                                                    <span class="text-danger text-sm font-weight-bolder">+{{energy["pc_month"]}}%</span>
                                                {% endif %}                                               
                                            </h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape shadow text-center border-radius-md bg-dark">
                                            <i class="ni ni-chart-bar-32 text-lg opacity-10" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="img-container">
                <img src="{{url_for('static', filename='image/cuisine.png')}}"/>
                <div class="text-block" id="frigo">
                    <a>{{devices_conso["Frigo"]}} W</a>
                    <span class="tooltiptext">Frigo</span>
                </div>
                <div class="text-block" id="hob">
                    <a>{{devices_conso["Taque de cuisson"]}} W</a>
                    <span class="tooltiptext">Taque de cuisson</span>
                </div>
            </div>
        </div>
    </div>

    <div class="part">
        <h1>Fenêtre</h1>

        <div class="main-content" id="panel">
            <div class="container-fluid pt-3">
                <div class="row removable">
                    <div class="col-xl-3 col-sm-6">
                    </div>
                    <div class="col-xl-3 col-sm-6">
                    </div>
                    <div class="col-xl-3 col-sm-6">
                    </div>
                    <div class="col-xl-3 col-sm-6">
                    </div>
                </div>
                <div class="row removable">
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text font-weight-bold">Température<br>pièce<br></p>
                                            <h5 id="temp_in" class="font-weight-bolder mb-0">{{temp_in}}°C <br></h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape shadow text-center border-radius-md bg-dark">
                                            <i class="fa-solid fa-temperature-high"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text font-weight-bold">Température<br>extérieure<br></p>
                                            <h5 id="temp_out" class="font-weight-bolder mb-0">{{temp_out}}°C <span class="text-success text-sm font-weight-bolder"></span>
                                            </h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape shadow text-center border-radius-md bg-dark">
                                            <i class="fa-solid fa-temperature-high"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text font-weight-bold">Humidité<br>pièce<br></p>
                                            <h5 id="hum" class="font-weight-bolder mb-0">{{hum}} % <span class="text-success text-sm font-weight-bolder"></span>
                                            </h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape shadow text-center border-radius-md bg-dark">
                                            <i class="fa-solid fa-droplet"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card mb-4">
                    <div class="card-body p-3">
                        <div class="row">
                            <div class="col-lg-5 ms-auto text-center mt-5 mt-lg-0">
                                <div class="border-radius-lg h-100">
                                    <div class="position-relative d-flex align-items-center justify-content-center h-100">
                                        {% if is_open %}
                                            <img id="window_img" class="w-100 position-relative z-index-2 pt-4" src="{{url_for('static', filename='image/window_open.jpg')}}">
                                        {% else %}
                                            <img id="window_img" class="w-100 position-relative z-index-2 pt-4" src="{{url_for('static', filename='image/window_close.jpg')}}">
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="d-flex flex-column h-100">
                                    <p id="auto_info" class="mb-1 pt-2 text-bold">{% if mode_auto %}🟢 Auto{% else %}🔴 Manuelle{% endif %}<br></p>
                                    <h5 id="open_info" class="font-weight-bolder">{% if is_open %}Ouverte{% else %}Fermée{% endif %}<br></h5>
                                    <p id="state" class="mb-1 pt-2 text-bold">{{state}}</p><br>
                                    <p id="reason" class="mb-5"></p><br>
                                    <p id="temp_des" class="mb-5">Température désirée : {{temp_desired}}°C</p><br>
                                    <a class="text-body text-sm font-weight-bold mb-0 icon-move-right mt-auto" href="javascript:;">&nbsp;
                                    </a>
                                </div>
                            </div>
                        </div>
                        <br><br>
                        <div class="row removable">
                            {% if is_open %}
                                <div class="col-lg-3"><a id="open" href="/close/" class="btn mb-4 btn-dark" style="color: white;">Fermer</a></div>
                            {% else %}
                                <div class="col-lg-3"><a id="open" href="/open/" class="btn mb-4 btn-dark" style="color: white;">Ouvrir</a></div>
                            {% endif %}
                            <div class="col-lg-3"><a id="auto" href="/mode/" class="btn mb-4 btn-dark" style="color: white;">{% if mode_auto %}Désactiver{% else %}Activer{% endif %}</a></div>
                            <div class="col-lg-3"><a class="btn mb-4 btn-dark" href="/window/" style="color: white;">Historique</a></div>
                            <div class="col-lg-3"><a class="btn mb-4 btn-dark" href="/update/" style="color: white;">Paramètres</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

      
<script src="https://demos.creative-tim.com/soft-ui-dashboard/assets/js/core/popper.min.js"></script>
<script src="https://demos.creative-tim.com/soft-ui-dashboard/assets/js/core/bootstrap.min.js"></script>
<script src="https://demos.creative-tim.com/soft-ui-dashboard/assets/js/soft-ui-dashboard.min.js?v=1.0.2"></script>

<script src="{{url_for('static', filename='js/window.js')}}"></script>
<script src="{{url_for('static', filename='js/dashboard.js')}}"></script>

</body>

{% endblock %}
